/* XPECT_SETUP uk.ac.kcl.inf.trader.tests.varAndScope.VarAndScopeTest END_SETUP */

var user = String : "personA"
var pwd = String : "passwordA"
var money = Real : 500.50
var leverage = Real : 0.02
var tf = String : "1HR"

connect to broker SwissBank with username user, password pwd, leverage leverage, money money, timeframe tf

create bot with buyAndHold strategy using 60.15 from money

create bot with meanReversion strategy using 40.05 from money

var loopCounter = int: 3
// XPECT scope at loopCounter --> loopCounter, tf, money, leverage, pwd, user, !allocatedFund, ...
loop loopCounter times do 
	var allocatedFund = 100.10
	
	// XPECT scope at loopCounter --> loopCounter, tf, money, leverage, pwd, user, allocatedFund
	create bot with favStrategy strategy using allocatedFund from money
end

see registered bots

execute bots

stop bots